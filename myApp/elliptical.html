
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - extrude shapes</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<style>
			body {
				font-family: Monospace;
				background-color: #222;
				margin: 0px;
				overflow: hidden;
			}
			a {
				color: #f80;
			}
		</style>
	</head>

	<body>

		<script src="./three.min.js"></script>
		<script src="js/controls/TrackballControls.js"></script>

		<script>

			var container;

			var camera, scene, renderer, controls;

			init();
			animate();

			function init() {

				var info = document.createElement( 'div' );
				info.style.position = 'absolute';
				info.style.top = '10px';
				info.style.width = '100%';
				info.style.textAlign = 'center';
				info.style.color = '#fff';
				info.style.link = '#f80';
				info.innerHTML = '<a href="http://threejs.org" target="_blank">three.js</a> webgl - geometry extrude shapes';
				document.body.appendChild( info );

				renderer = new THREE.WebGLRenderer();
				renderer.setClearColor( 0x222222 );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				scene = new THREE.Scene();

				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.set( 0, 0, 500 );

				controls = new THREE.TrackballControls( camera, renderer.domElement );
				controls.minDistance = 20;
				controls.maxDistance = 500;

				scene.add( new THREE.AmbientLight( 0xffffff ) );

				var light = new THREE.PointLight( 0xffffff );
				light.position.copy( camera.position );
				scene.add( light );
				var light = new THREE.PointLight( 0xffffff );
				light.position.set(0,0,-500);
				scene.add( light );
				var light = new THREE.PointLight( 0xffffff );
				light.position.set(0,50,-500);
				scene.add( light );
				var light = new THREE.PointLight( 0xffffff );
				light.position.set(0,-50,-500);
				scene.add( light );

				
				//stuffers
				for(var j=0;j<3;j++)
				{
					for(var i=0;i<3;i++)
					{
						var closedSpline = new THREE.SplineCurve3( [
							new THREE.Vector3( 30*i, 20*j, -10 ),
							new THREE.Vector3( 30*i, 20*j, 90 )
						] );

						var extrudeSettings = {
							steps			: 100,
							bevelEnabled	: false,
							extrudePath		: closedSpline
						};

						var shape = new THREE.Shape();
						shape.moveTo( 5,0 );
						shape.quadraticCurveTo( 5,10 , 0, 10 );
						shape.quadraticCurveTo(-5,10 , -5, 0 );
						shape.quadraticCurveTo(-5,-10,  0, -10 );
						shape.quadraticCurveTo( 5,-10,  5,0);


						var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings);

						var material = new THREE.MeshLambertMaterial( { color: 0xff0000, wireframe: false } );

						var mesh = new THREE.Mesh( geometry, material );

						scene.add( mesh );
					}

				}
				// binders
				for(var i=0 ; i<1 ; i++)

				{
					var binderPoints = [ new THREE.Vector3(15,-5,20 + 40*i), new THREE.Vector3(15,40,20 + 40*i)]
					var curve = new THREE.QuadraticBezierCurve3(
						new THREE.Vector3( 15, 40, 20 ),
						new THREE.Vector3( 15, 50, 20 ),
						new THREE.Vector3( 30, 50, 20 )
					);

					binderPoints = binderPoints.concat(curve.getPoints( 20 ).slice(1,18))
					var curve = new THREE.QuadraticBezierCurve3(
						new THREE.Vector3( 30, 50, 20 ),
						new THREE.Vector3( 45, 50, 20 ),
						new THREE.Vector3( 45, 40, 20 )
					);
					binderPoints = binderPoints.concat(curve.getPoints( 20 ).slice(1,19))
					binderPoints = binderPoints.concat([new THREE.Vector3(45, 40, 20),new THREE.Vector3(45,-5,20 + 40*i)])
					
					console.log(binderPoints)
					var closedSpline = new THREE.SplineCurve3(binderPoints);

					var extrudeSettings = {
						steps			: 200,
						bevelEnabled	: false,
						extrudePath		: closedSpline
					};

					var shape = new THREE.Shape();
					shape.moveTo(0,5);
					shape.quadraticCurveTo( 10,5, 10, 0 );
					shape.quadraticCurveTo(10,-5 , 0,-5 );
					shape.quadraticCurveTo(-10,-5,  -10,0 );
					shape.quadraticCurveTo( -10,5, 0,5);


					var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings);

					var material = new THREE.MeshLambertMaterial( { color: 0x00ff00, wireframe: false } );

					var mesh = new THREE.Mesh( geometry, material );

					scene.add( mesh );

				}
				//fillers
				for(var j=0;j<3;j++)
				{
					for(var i=0;i<2;i++)
					{
						var closedSpline = new THREE.SplineCurve3( [
							new THREE.Vector3( -10  ,10+20*i, 40*j ),
							new THREE.Vector3( 70,10+20*i, 40*j)
						] );

						var extrudeSettings = {
							steps			: 100,
							bevelEnabled	: false,
							extrudePath		: closedSpline
						};

						var shape = new THREE.Shape();
						shape.moveTo(0,5);
						shape.quadraticCurveTo( 10,5, 10, 0 );
						shape.quadraticCurveTo(10,-5 , 0,-5 );
						shape.quadraticCurveTo(-10,-5,  -10,0 );
						shape.quadraticCurveTo( -10,5, 0,5);


						var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings);

						var material = new THREE.MeshLambertMaterial( { color: 0x0000ff, wireframe: false } );

						var mesh = new THREE.Mesh( geometry, material );

						scene.add( mesh );
					}

				}
			}


			function animate() {

				requestAnimationFrame( animate );

				controls.update();

				renderer.render( scene, camera );

			}

		</script>

	</body>

</html>
